# 友谊农场智慧农业平台 - 深度测试问题汇总

> 以20年农场主身份进行实际操作测试
> 测试日期：2026-01-02

---

## 🔴 严重问题（必须立即修复）

### 1. 红色虚线框布局问题
- **现象**：整个页面的元素都被红色虚线框包围
- **影响**：严重影响视觉体验，看起来像未完成的产品
- **原因**：CSS调试样式未移除
- **位置**：全局CSS或组件样式

### 2. 顶部产量显示异常
- **现象**：显示"产量 1:39↑"或"产量 1:20↑"
- **应该显示**："今日产量 17,937.4 吨"
- **原因**：顶部状态栏的产量显示被截断或格式化错误
- **位置**：`CNHHeader.tsx`

### 3. 设备定位在建筑物区域
- **现象**：点击设备后，地图定位到村庄/建筑物区域，不是农田
- **影响**：作为农场主，我需要知道设备在哪块农田作业
- **原因**：农场坐标设置不准确
- **位置**：`config.ts` 中的 FARM_CENTER

### 4. 地图设备显示不全
- **现象**：地图上只显示2-3台设备，应该显示80台
- **影响**：无法全面监控所有设备
- **原因**：地图渲染或过滤逻辑问题
- **位置**：`Map.tsx`

---

## 🟡 中等问题（需要修复）

### 5. 左侧设备列表图标是卡通图标
- **现象**：设备列表显示卡通拖拉机图标，不是真实农机照片
- **影响**：视觉体验不专业
- **位置**：`CNHSidebar.tsx`

### 6. 设备名称被截断
- **现象**：设备名称显示不完整，如"约翰迪尔 S"
- **影响**：无法快速识别设备
- **位置**：设备卡片样式

### 7. 数据一致性问题
- **现象**：顶部显示11.9万亩，亩产分析显示131,101亩
- **影响**：数据可信度降低
- **位置**：数据统计逻辑

### 8. 轨迹回放页面地图空白
- **现象**：轨迹回放页面没有显示地图，只有设备列表
- **影响**：无法查看历史轨迹
- **位置**：轨迹回放页面组件

---

## 🟢 轻微问题（可选修复）

### 9. 设备状态不一致
- **现象**：设备显示"离线"但详情显示"行驶中"
- **位置**：状态更新逻辑

### 10. 维保管理页面布局问题
- **现象**：维保管理页面显示了智能警报的内容
- **位置**：路由或页面组件

---

## 根本原因分析

### 核心问题：开发调试代码未清理 + 布局样式问题

| 根因 | 影响的问题 |
|------|-----------|
| CSS调试样式未移除 | 红色虚线框 |
| 顶部状态栏布局空间不足 | 产量显示异常 |
| 农场坐标配置不准确 | 设备定位在建筑物 |
| 地图渲染逻辑问题 | 设备显示不全 |
| 使用SVG图标而非真实照片 | 卡通图标问题 |

---

## 修复计划

### 第一优先级（立即修复）
1. ✅ 移除红色虚线框CSS调试样式
2. ✅ 修复顶部产量显示格式
3. ✅ 更新农场坐标到纯农田区域
4. ✅ 修复地图设备渲染逻辑

### 第二优先级（随后修复）
5. ✅ 更新设备列表图标为真实照片
6. ✅ 修复设备名称截断问题
7. ✅ 统一数据计算逻辑

### 第三优先级（最后修复）
8. ✅ 修复轨迹回放页面
9. ✅ 修复维保管理页面
10. ✅ 修复设备状态一致性
